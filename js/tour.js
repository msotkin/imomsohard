var tourDates = [
  {
    date: 'Friday May 19',
    city: 'Portland, OR',
    venue: 'Bloom Festival - Portland Marriott Downtown',
    url: 'https://www.eventbrite.com/e/bloom-a-3-day-event-featuring-imomsohard-tickets-29553443144'
  },
  {
    date: 'Sunday May 21',
    city: 'Seattle, WA',
    venue: 'Moore Theatre',
    url: 'https://www.stgpresents.org/tickets/by-month/eventdetail/3333/27%7C28%7C29%7C30/imomsohard-live'
  },
  {
    date: 'Monday June 12',
    city: 'Modesto, CA',
    venue: 'Gallo Center for the Arts',
    url: 'http://bit.ly/2o37Yga'
  },
  {
    date: 'Tuesday June 13',
    city: 'San Jose, CA',
    venue: 'San Jose Center for Performing Arts',
    url: 'http://bit.ly/2nFFoAO'
  },
  {
    date: 'Wednesday June 14',
    city: 'Santa Rosa, CA',
    venue: 'Luther Burbank Center for the Arts',
    url: 'http://bit.ly/2mSkzxH'
  },
  {
    date: 'Thursday June 15',
    city: 'Fresno, CA',
    venue: 'William Saroyan Theatre',
    url: 'http://bit.ly/2naDNQe'
  },
  {
    date: 'Friday June 16',
    city: 'Thousand Oaks, CA',
    venue: 'Thousand Oaks Civic Arts Plaza',
    url: 'http://bit.ly/2nofzTD'
  },
  {
    date: 'Saturday June 17',
    city: 'Los Angeles, CA',
    venue: 'The Theatre at Ace Hotel',
    url: 'http://bit.ly/2nFsv9K'
  },
  {
    date: 'Monday June 19',
    city: 'Riverside, CA',
    venue: 'The Fox Performing Arts Center',
    url: 'http://bit.ly/2naAHf5'
  },
  {
    date: 'Wednesday June 21',
    city: 'Denver, CO',
    venue: 'Paramount Theatre',
    url: 'http://bit.ly/2mJB3wV'
  },
  {
    date: 'Thursday June 22',
    city: 'Fort Collins, CO',
    venue: 'Lincoln Center',
    url: 'http://www.lctix.com/imomsohard'
  },
  {
    date: 'Friday June 23',
    city: 'Omaha, NE',
    venue: 'Holland Performing Arts Center',
    url: 'https://ticketomaha.com/Productions/imomsohard',
    soldOut: true
  },
  {
    date: 'Saturday June 24',
    city: 'Omaha, NE',
    venue: 'Holland Performing Arts Center',
    url: 'http://bit.ly/2o3pZeB',
    soldOut: true
  },
  {
    date: 'Sunday June 25 - 3PM',
    city: 'Kansas City, MO',
    venue: 'Arvest Bank Theatre',
    url: 'http://www.axs.com/artists/1102775/imomsohard-tickets'
  },
  {
    date: 'Sunday June 25 - 7PM',
    city: 'Kansas City, MO',
    venue: 'Arvest Bank Theatre',
    url: 'http://bit.ly/2nFpGVZ',
    soldOut: true
  },
  {
    date: 'Tuesday June 27',
    city: 'St Louis, MO',
    venue: 'Touhill Performing Arts Center',
    url: 'http://bit.ly/2noaric',
    soldOut: true
  },
  {
    date: 'Thursday June 29',
    city: 'Indianapolis, IN',
    venue: 'Murat Theatre at Old National Centre',
    url: 'http://bit.ly/2nFwV0m'
  },
  {
    date: 'Friday June 30',
    city: 'Peoria, IL',
    venue: 'Peoria Civic Center',
    url: 'http://bit.ly/2nnZAoz',
    soldOut: true
  },
  {
    date: 'Thursday July 6',
    city: 'Green Bay, WI',
    venue: 'Meyer Theatre',
    url: 'https://meyertheatre.org/imomsohard-2017-07-06/'
  },
  {
    date: 'Friday July 7',
    city: 'Chicago, IL',
    venue: 'Vic Theatre',
    url: 'http://ticketf.ly/2n9P2rn'
  },
  {
    date: 'Saturday July 8',
    city: 'Flint, MI',
    venue: 'The Whiting',
    url: 'http://bit.ly/2nHRyJo'
  },
  {
    date: 'Sunday July 9',
    city: 'Grand Rapids, MI',
    venue: 'DeVos Performance Hall',
    url: 'http://bit.ly/2n1NdO2'
  },
  {
    date: 'Tuesday July 11',
    city: 'Columbus, OH',
    venue: 'The Southern Theatre',
    url: 'http://bit.ly/2o37l6A'
  },
  {
    date: 'Wednesday July 12',
    city: 'Akron, OH',
    venue: 'Akron Civic Theatre',
    url: 'http://bit.ly/2nkCnVC'
  },
  {
    date: 'Thursday July 13',
    city: 'Pittsburgh, PA',
    venue: 'Byham Theater',
    url: 'http://bit.ly/2no36PE'
  },
  {
    date: 'Friday July 14',
    city: 'York, PA',
    venue: 'Strand Capitol Performing Arts Center',
    url: 'https://appellcenter.org/show/imomsohard'
  },
  {
    date: 'Saturday July 15',
    city: 'Baltimore, MD',
    venue: 'The Modell Lyric',
    url: 'https://modell-lyric.com/event/imomsohard/'
  },
  {
    date: 'Sunday July 16',
    city: 'Englewood, NJ',
    venue: 'Bergen Performance Arts Center',
    url: 'https://www.bergenpac.org/events/detail/imomsohard'
  },
  {
    date: 'Monday July 17',
    city: 'Red Bank, NJ',
    venue: 'Count Basie Theatre',
    url: 'http://www.countbasietheatre.org/events/imomsohard/'
  },
  {
    date: 'Wednesday July 19',
    city: 'New York, NY',
    venue: 'The Town Hall',
    url: 'http://bit.ly/2nZ2S49'
  },
  {
    date: 'Thursday July 20',
    city: 'Boston, MA',
    venue: 'The Wilbur Theatre',
    url: 'http://bit.ly/2ntdZS7',
    soldOut: true
  },
  {
    date: 'Saturday July 22',
    city: 'Providence, RI',
    venue: 'The VETS',
    url: 'http://bit.ly/2orgO3s'
  },
  {
    date: 'Sunday July 23',
    city: 'Washington, DC',
    venue: 'Warner Theatre',
    url: 'http://bit.ly/2mJsr9S'
  },
  {
    date: 'Tuesday July 25',
    city: 'Atlanta, GA',
    venue: 'Cobb Energy Centre',
    url: 'http://bit.ly/2naEQ2A'
  },
  {
    date: 'Thursday July 27',
    city: 'San Antonio, TX',
    venue: 'Tobin Center',
    url: 'http://bit.ly/2n9Ophw'
  },
  {
    date: 'Friday July 28',
    city: 'Dallas, TX',
    venue: 'Majestic Theatre',
    url: 'http://bit.ly/2n1TY2b'
  },
  {
    date: 'Saturday July 29',
    city: 'Austin, TX',
    venue: 'Austin City Limits at the Moody Theater',
    url: 'https://www.ticketfly.com/purchase/event/1474943'
  },
  {
    date: 'Sunday July 30 - 3PM',
    city: 'Houston, TX',
    venue: 'Cullen Performance Hall',
    url: 'http://www1.ticketmaster.com/event/3A005284A38A981E'
  },
  {
    date: 'Sunday July 30 - 7PM',
    city: 'Houston, TX',
    venue: 'Cullen Performance Hall',
    url: 'http://bit.ly/2o2gKLc',
    soldOut: true
  },
  {
    date: 'Monday July 31',
    city: 'Midwest City, OK',
    venue: 'Rose State College Hudiburg Chevrolet Center',
    url: 'http://bit.ly/2na8rZ0',
    soldOut: true
  },
  {
    date: 'Tuesday August 1',
    city: 'Tulsa, OK',
    venue: 'Cox Business Center Ballroom',
    url: 'http://coxcentertulsa.com/event/imomsohard/'
  },
  {
    date: 'Saturday November 18',
    city: 'Henderson, NV',
    venue: 'Green Valley Ranch Grand Events Center',
    url: 'https://www1.ticketmaster.com/event/1700530AA3C42E45'
  }
]

document.addEventListener("DOMContentLoaded", 
  function() {
    var v = document.getElementsByClassName("tour-dates");
    var li, p, a, button;
    tourDates.filter(function(data) {
      var t = data.date.split(' ');
      console.log(new Date(t[1] + ' ' + t[2] +', 2017 23:59:59'));
      console.log(Date.now());
      return new Date(t[1] + ' ' + t[2] +', 2017 23:59:59') > Date.now();
    }).forEach(function(tourDate) {
      li = document.createElement("li");
      a = document.createElement("a");
      button = document.createElement("button");

      tourDate.soldOut ? button.innerHTML = "SOLD OUT!" : button.innerHTML = "TICKETS!";
      a.setAttribute("href", tourDate.url);
      a.setAttribute("target", "_blank");
      a.appendChild(button);
      
      li.innerHTML = "<h4>"+tourDate.date + "</h4><p><span>" + tourDate.city + "</span></p><p>" + tourDate.venue + "</p>";

      li.appendChild(a);
      v[0].appendChild(li);
    });
  })